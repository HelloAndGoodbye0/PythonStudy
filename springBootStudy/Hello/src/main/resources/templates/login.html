<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.83.1">
    <title>Login</title>

    <!-- Bootstrap core CSS -->

    <script src="/webjars/jquery/3.6.0/jquery.min.js"></script>
    <script src="JqureyCookie/jqureycookie.js"></script>

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>


    <!-- Custom styles for this template -->
    <link href="css/signin.css" rel="stylesheet">
    <link href="bootstrap-5.1.0/css/bootstrap.css" rel="stylesheet">
</head>
<body class="text-center">

<main class="form-signin">

    <div>
        <form th:action="@{/login}" method="post">
            <img class="mb-4" src="brand/bootstrap-logo.svg" alt="" width="72" height="57">
            <h1 class="h3 mb-3 fw-normal">Please sign in</h1>
            <p style="color: red;display:none" class="errorTip"> 密码错误</p>
            <div class="form-floating">
                <input type="text" class=" form-control" id="floatingInput" placeholder="User Name" name="username">
                <label for="floatingInput">User Name</label>
            </div>
            <div class="form-floating">
                <input type="password" class="password form-control" id="floatingPassword" placeholder="Password" name="password">
                <label for="floatingPassword">Password</label>
            </div>

            <div class="checkbox mb-3">
                <label>
                    <input type="checkbox"  id = "remember"> Remember me
                </label>
            </div>
            <button class="w-100 btn btn-lg btn-primary btn-login" type="submit">Sign in</button>
            <p class="mt-5 mb-3 text-muted">&copy; 2017–2021</p>
        </form>

    </div>

</main>


<script>
    $(function () {

        // $(".btn-login").click(function () {
        //     var arg = {username: $(".email").val(), "password": $(".password").val()}
        //     $.post("/login", arg, function (data) {
        //         console.log(JSON.stringify(data))
        //         if (data.code == 0) {
        //             alert("登录成功")
        //         } else {
        //             $(".errorTip").css("display", "block")
        //         }
        //     })
        // })
        function set_cookie(key,value)
        {
            $.cookie(key,value)
        }
        function get_cookie(key)
        {
           return  $.cookie(key)
        }
        function remove_cookie(key)
        {
            $.removeCookie(key)
        }

        console.log("remember",get_cookie("remember"))
        if (get_cookie("remember"))
        {
            $("#floatingInput").val(get_cookie("username"))
            $("#floatingPassword").val(get_cookie("password"))
            $("#remember").prop("checked",true)
        }


        $("#remember").click(function(){

            let b = $(this).prop("checked")
            console.log(b)
            if (b){
                set_cookie("remember",true)
                set_cookie("username",$("#floatingInput").val())
                set_cookie("password",$("#floatingPassword").val())
            }else
            {
                $("#floatingInput").val("")
                $("#floatingPassword").val("")
                remove_cookie("username")
                remove_cookie("password")
                remove_cookie("remember")
            }
        })

    })

</script>

</body>
</html>


